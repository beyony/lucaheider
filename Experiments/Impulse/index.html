<!DOCTYPE html>
<html>

<head>
  <link href='http://fonts.googleapis.com/css?family=Nova+Flat' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="style.css" />
  <title>
    Impulse Test
  </title>
</head>

<body>

  <div class="panel">
    crack:
    <input class="input" type="range" min="0.001" max="1" step="0.001" data-bind="value: lineWidth"> length:
    <input class="input" type="range" min="0.001" max="0.1" step="0.001" data-bind="value: widthToSpikeLengthRatio"> size:
    <input class="input" type="range" min="1" max="300" step="1" data-bind="value: fontSize">

    <select class="input" data-bind="options: availableFontFamilies, value: fontFamily"></select>
    <select class="input" data-bind="options: availableFontWeights, value: fontWeight"></select>

    <button data-bind="click: reduceParticleSum">Reduce!</button>

    <input class="input text" type="text" data-bind="value: text">
      
      opacity: <input class="input" type="range" min="0.01" max="1" step="0.01" data-bind="value: particleOpacity">
      hueRange: <input class="input" type="range" min="1" max="100" step="1" data-bind="value: hueRange">
      colorSaturation: <input class="input" type="range" min="1" max="100" step="1" data-bind="value: colorSaturation">
      textOpacity: <input class="input" type="range" min="0.01" max="1" step="0.01" data-bind="value: textOpacity">
      
        <div class="multiInput" data-bind="foreach: textArray">
            <input class="" type="text" data-bind="value: text">
        </div>
      <button data-bind="click: addText">Add text!</button>
      <button data-bind="click: stopAnimation">Stop animation!</button>
  </div>
    



  <canvas id="canvas"></canvas>
  <h2>Move the mouse!</h2>
  <h6>Particles: <span data-bind="text: particlesLength"></span></h6>



</body>
<script type="text/javascript" src="knockout-3.4.0.js"></script>
<script>
  var inputs = document.getElementsByClassName('input');
  for (var index = 0; index < inputs.length; ++index) {
    inputs[index].addEventListener("change", function() {
      parameterVM.reset();
    });
  }


  // ViewModel
  var parameterVM = {
      

  particleOpacity: ko.observable(0.99),
  textOpacity: ko.observable(0.5),
  baseHue: ko.observable(350),
  hueRange: ko.observable(9),
  hueSpeed: ko.observable(0.04),
  colorSaturation: ko.observable(100),

      
      
      
    textArray: ko.observableArray([{text: "huhu"}]),
    text: ko.observable("IMPULSE"),
    fontWeight: ko.observable("bold"),
    fontSize: ko.observable(100),
    fontFamily: ko.observable("Arial"),
    lineWidth: ko.observable(0.25),
    widthToSpikeLengthRatio: ko.observable(0.005),
    getFont: function() {
      return "" + this.fontWeight() + " " + this.fontSize() + "px " + this.fontFamily() + ", Arial, Helvetica, sans-serif"
    },
    reset: function() {
      if (typeof reset === "function") {

        setTimeout(reset, 10);
      }
    },
    reduceParticleSum: function() {
      this.particlesLength(reduceParticleSum());
    },
      stopAnimation: function() {
          clearInterval(textInterval);
      },
      addText: function() {
          this.textArray.push({text: "new"});
      },

    availableFontFamilies: ko.observableArray(["Nova Flat","Arial", "Verdana", "Georgia", "Impact"]),
    availableFontWeights: ko.observableArray(["normal", "italic", "bold", "lighter"]),

    particlesLength: ko.observable(0)
  }

  ko.applyBindings(parameterVM);
</script>
    
    <script>
            var count = 0;
        
        var textInterval = setInterval(function(){
            if(parameterVM.text() !== parameterVM.textArray()[count % parameterVM.textArray().length].text) {
            parameterVM.text(parameterVM.textArray()[count % parameterVM.textArray().length].text);
            parameterVM.reset();
                }
            ++count;
        }, 2000);
        
        
        
    </script>
    
<script type="text/javascript" src="javascript.js"></script>

</html>
























